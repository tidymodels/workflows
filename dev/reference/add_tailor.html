<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Add a tailor to a workflow — add_tailor • workflows</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Add a tailor to a workflow — add_tailor"><meta name="description" content="

add_tailor() specifies post-processing steps to apply through the
usage of a tailor.
remove_tailor() removes the tailor as well as any downstream objects
that might get created after the tailor is used for post-processing, such as
the fitted tailor.
update_tailor() first removes the tailor, then replaces the previous
tailor with the new one.

"><meta property="og:description" content="

add_tailor() specifies post-processing steps to apply through the
usage of a tailor.
remove_tailor() removes the tailor as well as any downstream objects
that might get created after the tailor is used for post-processing, such as
the fitted tailor.
update_tailor() first removes the tailor, then replaces the previous
tailor with the new one.

"><meta property="og:image" content="https://workflows.tidymodels.org/logo.png"><meta name="robots" content="noindex"><script defer data-domain="workflows.tidymodels.org,all.tidymodels.org" src="https://plausible.io/js/plausible.js"></script></head><body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">workflows</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.2.0.9002</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/stages.html">Workflow Stages</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/extras/getting-started.html">Getting Started</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/tidymodels/workflows/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Add a tailor to a workflow</h1>
      <small class="dont-index">Source: <a href="https://github.com/tidymodels/workflows/blob/main/R/post-action-tailor.R" class="external-link"><code>R/post-action-tailor.R</code></a></small>
      <div class="d-none name"><code>add_tailor.Rd</code></div>
    </div>

    <div class="ref-description section level2">

<ul><li><p><code>add_tailor()</code> specifies post-processing steps to apply through the
usage of a tailor.</p></li>
<li><p><code>remove_tailor()</code> removes the tailor as well as any downstream objects
that might get created after the tailor is used for post-processing, such as
the fitted tailor.</p></li>
<li><p><code>update_tailor()</code> first removes the tailor, then replaces the previous
tailor with the new one.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">add_tailor</span><span class="op">(</span><span class="va">x</span>, <span class="va">tailor</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">remove_tailor</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">update_tailor</span><span class="op">(</span><span class="va">x</span>, <span class="va">tailor</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>A workflow</p></dd>


<dt id="arg-tailor">tailor<a class="anchor" aria-label="anchor" href="#arg-tailor"></a></dt>
<dd><p>A tailor created using <code><a href="https://tailor.tidymodels.org/reference/tailor.html" class="external-link">tailor::tailor()</a></code>. The tailor
should not have been trained already with <code><a href="https://tailor.tidymodels.org/reference/reexports.html" class="external-link">tailor::fit()</a></code>; workflows
will handle training internally.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Not used.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p><code>x</code>, updated with either a new or removed tailor postprocessor.</p>
    </div>
    <div class="section level2">
    <h2 id="data-usage">Data Usage<a class="anchor" aria-label="anchor" href="#data-usage"></a></h2>



<p>While preprocessors and models are trained on data in the usual sense,
postprocessors are trained on <em>predictions</em> on data. When a workflow
is fitted, the user typically supplies training data with the <code>data</code> argument.
When workflows don't contain a postprocessor that requires training,
users can pass all of the available data to the <code>data</code> argument to train the
preprocessor and model. However, in the case where a postprocessor must be
trained as well, allotting all of the available data to the <code>data</code> argument
to train the preprocessor and model would leave no data
to train the postprocessor with—if that were the case, workflows
would need to <code><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict()</a></code> from the preprocessor and model on the same <code>data</code>
that they were trained on, with the postprocessor then training on those
predictions. Predictions on data that a model was trained on likely follow
different distributions than predictions on unseen data; thus, workflows must
split up the supplied <code>data</code> into two training sets, where the first is used to
train the preprocessor and model and the second, called the "calibration set,"
is passed to that trained postprocessor and model to generate predictions,
which then form the training data for the postprocessor.</p>
<p>When fitting a workflow with a postprocessor that requires training
(i.e. one that returns <code>TRUE</code> in <code>.workflow_postprocessor_requires_fit(workflow)</code>),
users must pass two data arguments–the usual <code>fit.workflow(data)</code> will be
used to train the preprocessor and model while <code>fit.workflow(data_calibration)</code>
will be used to train the postprocessor.</p>
<p>In some situations, randomly splitting <code>fit.workflow(data)</code> (with
<code><a href="https://rsample.tidymodels.org/reference/initial_split.html" class="external-link">rsample::initial_split()</a></code>, for example) is sufficient to prevent data
leakage. However, <code>fit.workflow(data)</code> could also have arisen as:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>boots <span class="ot">&lt;-</span> rsample<span class="sc">::</span><span class="fu">bootstraps</span>(some_other_data)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>split <span class="ot">&lt;-</span> rsample<span class="sc">::</span><span class="fu">get_rsplit</span>(boots, <span class="dv">1</span>)</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>data <span class="ot">&lt;-</span> rsample<span class="sc">::</span><span class="fu">analysis</span>(split)</span></code></pre><p></p></div>
<p>In this case, some of the rows in <code>data</code> will be duplicated. Thus, randomly
allotting some of them to train the preprocessor and model and others to train
the preprocessor would likely result in the same rows appearing in both
datasets, resulting in the preprocessor and model generating predictions on
rows they've seen before. Similarly problematic situations could arise in the
context of other resampling situations, like time-based splits.
In general, <code><a href="https://rsample.tidymodels.org/reference/internal_calibration_split.html" class="external-link">rsample::internal_calibration_split()</a></code> offers a way to prevent data
leakage when resampling. When workflows with postprocessors that require
training are passed to the tune package, this is handled internally.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/tidymodels/tailor" class="external-link">tailor</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org" class="external-link">magrittr</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">tailor</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tailor.tidymodels.org/reference/tailor.html" class="external-link">tailor</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">tailor_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tailor.tidymodels.org/reference/adjust_probability_threshold.html" class="external-link">adjust_probability_threshold</a></span><span class="op">(</span><span class="va">tailor</span>, <span class="fl">.1</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">workflow</span> <span class="op">&lt;-</span> <span class="fu"><a href="workflow.html">workflow</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">add_tailor</span><span class="op">(</span><span class="va">tailor_1</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">workflow</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ══ Workflow ═══════════════════════════════════════════════════════════</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-style: italic;">Preprocessor:</span> None</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-style: italic;">Model:</span> None</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-style: italic;">Postprocessor:</span> tailor</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ── Postprocessor ──────────────────────────────────────────────────────</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">tailor</span> <span style="color: #00BBBB;">─────────────────────────────────────────────────────────────</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> A binary postprocessor with 1 adjustment:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">•</span> Adjust probability threshold to 0.1.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NA</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">remove_tailor</span><span class="op">(</span><span class="va">workflow</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ══ Workflow ═══════════════════════════════════════════════════════════</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-style: italic;">Preprocessor:</span> None</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-style: italic;">Model:</span> None</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">update_tailor</span><span class="op">(</span><span class="va">workflow</span>, <span class="fu"><a href="https://tailor.tidymodels.org/reference/adjust_probability_threshold.html" class="external-link">adjust_probability_threshold</a></span><span class="op">(</span><span class="va">tailor</span>, <span class="fl">.2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ══ Workflow ═══════════════════════════════════════════════════════════</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-style: italic;">Preprocessor:</span> None</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-style: italic;">Model:</span> None</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-style: italic;">Postprocessor:</span> tailor</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ── Postprocessor ──────────────────────────────────────────────────────</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">tailor</span> <span style="color: #00BBBB;">─────────────────────────────────────────────────────────────</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> A binary postprocessor with 1 adjustment:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">•</span> Adjust probability threshold to 0.2.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NA</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/DavisVaughan" class="external-link">Davis Vaughan</a>, Simon Couch, <a href="https://frick.ws" class="external-link">Hannah Frick</a>, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

  </div></footer></body></html>

